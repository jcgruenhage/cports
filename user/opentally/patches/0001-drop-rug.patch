From 2766ea012f1855bfec0296eccbdb438afebf942d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jan=20Christian=20Gr=C3=BCnhage?=
 <jan.christian@gruenhage.xyz>
Date: Wed, 25 Sep 2024 19:04:07 +0200
Subject: [PATCH] drop rug

---
 Cargo.lock         | 28 ----------------------------
 Cargo.toml         |  7 +------
 src/numbers/mod.rs |  9 ---------
 3 files changed, 1 insertion(+), 43 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index 5fb48ed..a002dfb 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -60,12 +60,6 @@ version = "1.0.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "cdb031dd78e28731d87d56cc8ffef4a8f36ca26c38fe2de700543e627f8a464a"
 
-[[package]]
-name = "az"
-version = "1.1.1"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "822d7d63e0c0260a050f6b1f0d316f5c79b9eab830aca526ed904e1011bd64ca"
-
 [[package]]
 name = "bitflags"
 version = "1.2.1"
@@ -466,16 +460,6 @@ dependencies = [
  "syn",
 ]
 
-[[package]]
-name = "gmp-mpfr-sys"
-version = "1.4.5"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "18e70045792b1d584ef8d8ac5e890a98d9d6499d2d709cf2b23725b6dcb10064"
-dependencies = [
- "libc",
- "winapi",
-]
-
 [[package]]
 name = "hashbrown"
 version = "0.9.1"
@@ -756,7 +740,6 @@ dependencies = [
  "predicates",
  "prettytable-rs",
  "rkyv",
- "rug",
  "sha2",
  "utf8-chars",
  "wasm-bindgen",
@@ -996,17 +979,6 @@ dependencies = [
  "syn",
 ]
 
-[[package]]
-name = "rug"
-version = "1.12.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "32f75e07492c4d17d12f226d17e689fdb698db7a1e875fca0fac15626283bf24"
-dependencies = [
- "az",
- "gmp-mpfr-sys",
- "libc",
-]
-
 [[package]]
 name = "rustc_version"
 version = "0.3.3"
diff --git a/Cargo.toml b/Cargo.toml
index 6ad881d..c9d144b 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -21,6 +21,7 @@ nohash-hasher = "0.2.0"
 ibig = "0.3.2"
 itertools = "0.10.1"
 ndarray = "0.15.3"
+num-bigint = "0.4.0"
 num-traits = "0.2"
 predicates = "1.0.8"
 sha2 = "0.9.5"
@@ -31,7 +32,6 @@ wasm-bindgen = "0.2.81"
 console_error_panic_hook = "0.1.6"
 js-sys = "0.3.51"
 html-escape = "0.2.9"
-num-bigint = "0.4.0"
 num-rational = "0.4.0"
 paste = "1.0.5"
 
@@ -49,11 +49,6 @@ version = "3.2.5"
 default-features = false
 features = ["std", "derive"]
 
-[target.'cfg(not(target_arch = "wasm32"))'.dependencies.rug]
-version = "1.12"
-default-features = false
-features = ["integer", "rational", "float"]
-
 [profile.test]
 opt-level = 3
 
diff --git a/src/numbers/mod.rs b/src/numbers/mod.rs
index f34f9c6..de5443f 100644
--- a/src/numbers/mod.rs
+++ b/src/numbers/mod.rs
@@ -22,12 +22,7 @@ mod gfixed;
 /// Native 64-bit floating point arithmetic
 mod native;
 
-/// Exact rational arithmetic (using `rug`/GMP)
-#[cfg(not(target_arch = "wasm32"))]
-mod rational_rug;
-
 /// Exact rational arithmetic (using `num-bigint`)
-//#[cfg(target_arch = "wasm32")]
 mod rational_num;
 
 //#[cfg(target_arch = "wasm32")]
@@ -163,8 +158,4 @@ pub use self::fixed::Fixed;
 pub use self::gfixed::GuardedFixed;
 pub use self::native::NativeFloat64;
 
-#[cfg(not(target_arch = "wasm32"))]
-pub use self::rational_rug::Rational;
-
-#[cfg(target_arch = "wasm32")]
 pub use self::rational_num::Rational;
-- 
2.46.2

